<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discovery Lens</title>
    <link href="{{STYLE_URI}}" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>üîç Discovery Lens</h1>
            <p class="subtitle">Visualize how adaptive-tests discovers your code</p>
        </header>

        <section class="input-section">
            <label for="signature-input">Enter Discovery Signature (JSON)</label>
            <textarea
                id="signature-input"
                placeholder='{"name": "Calculator", "type": "class", "methods": ["add", "subtract"]}'
                rows="4"
            ></textarea>

            <div class="preset-buttons">
                <button class="preset-btn" data-preset="class">Class Example</button>
                <button class="preset-btn" data-preset="function">Function Example</button>
                <button class="preset-btn" data-preset="interface">Interface Example</button>
            </div>

            <button id="run-discovery" class="primary-btn">
                Run Discovery
            </button>
        </section>

        <section class="results-section" style="display: none;">
            <h2>Discovery Results</h2>
            <div class="results-summary" role="status" aria-live="polite"></div>
            <div id="results-container" role="list" aria-label="Discovery results"></div>
        </section>

        <section class="error-section" style="display: none;" role="alert">
            <div class="error-message"></div>
        </section>

        <section class="help-section">
            <details>
                <summary>How Discovery Works</summary>
                <div class="help-content">
                    <p>The discovery engine uses multiple strategies to find your code:</p>
                    <ul>
                        <li><strong>Name Matching:</strong> Searches for files and exports matching the signature name</li>
                        <li><strong>Type Analysis:</strong> Matches based on code structure (class, function, interface)</li>
                        <li><strong>Method Signatures:</strong> Compares available methods with expected ones</li>
                        <li><strong>Path Scoring:</strong> Prefers standard locations (src/, lib/, etc.)</li>
                        <li><strong>AST Analysis:</strong> Deep code structure analysis for accurate matching</li>
                    </ul>
                    <p>Each candidate receives a score based on how well it matches the signature. Higher scores indicate better matches.</p>
                </div>
            </details>
        </section>
    </div>

    <script src="{{SCRIPT_URI}}"></script>
</body>
</html>